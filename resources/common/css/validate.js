!function (a, n) { var i = /^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/, e = function (a, e) { var t = a.find("input, textarea"), o = a.find("#submit"), r = !1; validate = function (a, n) { for (var i = n.split("|"), e = !1, t = 0; t < i.length; t++) { var o = i[t]; if (o.indexOf("min") > -1) { var l = parseInt(o.match(/[0-9]/g).join("")); validatorFunc.min(a, l) || (e = !0) } else if (o.indexOf("max") > -1) { var l = parseInt(o.match(/[0-9]/g).join("")); validatorFunc.max(a, l) || (e = !0) } else "email" === o && (validatorFunc.email(a) || (e = !0)) } return r && e ? (a.removeClass("valid"), a.addClass("error"), a.next().addClass("on"), !1) : e ? (a.removeClass("valid"), !1) : i.indexOf("optional") > -1 ? (a.removeClass("error"), a.next().removeClass("on"), !0) : (a.removeClass("error"), a.next().removeClass("on"), a.addClass("valid"), !0) }, this.validatorFunc = { min: function (a, n) { return a.val().length >= n }, max: function (a, n) { return a.val().length <= n }, email: function (a) { return i.test(a.val()) } }; var l = t.filter(function () { for (var a = n(this), i = a.attr("name"), t = 0; t < e.length; t++)if (i === e[t].name) return a.on("input", function () { validate(a, e[t].validations) }), a }); l.each(function () { for (var a = 0; a < e.length; a++)n(this).attr("name") === e[a].name && validate(n(this), e[a].validations) }), o.off("click").on("click", function (a) { a.preventDefault(); var i = !1; l.each(function () { for (var a = 0; a < e.length; a++)n(this).attr("name") === e[a].name && (validate(n(this), e[a].validations) ? (n(this).removeClass("error"), e[a].validations.indexOf("optional") < 0 && n(this).addClass("valid"), n(this).next().removeClass("on")) : (r = !0, i = !0, n(this).addClass("error"), n(this).next().addClass("on"))) }), i }) }; a.SimpleValidator = e }(window, jQuery); var rules = [{ name: "first-name", validations: "min=1|max=240" }, { name: "last-name", validations: "max=240|optional" }, { name: "tel", validations: "max=240|optional" }, { name: "email", validations: "min=1|max=240|email" }, { name: "message", validations: "max=240|optional" }]; $(function () { SimpleValidator($("form"), rules), $("#open").on("click", function () { $(".form, .form form").addClass("show") }), $("#form-popup-close").on("click", function () { $("section.form, .form form").removeClass("show") }) });
